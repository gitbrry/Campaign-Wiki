
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <style>
            body { margin: 0; padding: 0; overflow: hidden; background-color: #1e1e1e; }
            .node { cursor: pointer; } /* Change cursor to hand on hover */
            .link { stroke: #999; stroke-opacity: 0.4; stroke-width: 1px; }
            text { font-family: 'Roboto', sans-serif; font-size: 12px; pointer-events: none; fill: #ffffff; text-shadow: 1px 1px 2px #000; }
            svg { width: 100vw; height: 100vh; }
        </style>
    </head>
    <body>
        <div id="graph"></div>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script>
            var nodes = [{"id": "index.md", "label": "Index", "url": "https://gitbrry.github.io/Campaign-Wiki/Summaries/", "link_count": 0}, {"id": "world_graph.md", "label": "World_graph", "url": "https://gitbrry.github.io/Campaign-Wiki/World_Graph/", "link_count": 0}, {"id": "example location.md", "label": "Example location", "url": "https://gitbrry.github.io/Campaign-Wiki/Locations/Example%20Location/", "link_count": 1}, {"id": "gooners.md", "label": "Gooners", "url": "https://gitbrry.github.io/Campaign-Wiki/Lore/Gooners/", "link_count": 0}, {"id": "bob the gob.md", "label": "Bob the gob", "url": "https://gitbrry.github.io/Campaign-Wiki/NPCs/Bob%20the%20Gob/", "link_count": 1}, {"id": "session 0.md", "label": "Session 0", "url": "https://gitbrry.github.io/Campaign-Wiki/Summaries/Session%200/", "link_count": 0}];
            var links = [{"source": "example location.md", "target": "bob the gob.md"}];

            var width = window.innerWidth;
            var height = window.innerHeight;

            var svg = d3.select("#graph").append("svg")
                .attr("width", width).attr("height", height);
            var g = svg.append("g");

            svg.call(d3.zoom().scaleExtent([0.1, 4]).on("zoom", () => g.attr("transform", d3.event.transform)));

            var simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(100))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .on("tick", ticked);

            var link = g.append("g").selectAll("line").data(links).enter().append("line").attr("class", "link");

            var node = g.append("g").selectAll("circle").data(nodes).enter().append("circle")
                .attr("class", "node")
                .attr("r", d => 5 + Math.sqrt(d.link_count * 2))
                .attr("fill", "#888")
                .on("click", d => window.parent.location.href = d.url) // THE MAGIC LINE
                .call(d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended));

            var text = g.append("g").selectAll("text").data(nodes).enter().append("text")
                .attr("dx", 12).attr("dy", ".35em").text(d => d.label);

            function ticked() {
                link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                node.attr("cx", d => d.x).attr("cy", d => d.y);
                text.attr("x", d => d.x).attr("y", d => d.y);
            }

            function dragstarted(d) { if (!d3.event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; }
            function dragged(d) { d.fx = d3.event.x; d.fy = d3.event.y; }
            function dragended(d) { if (!d3.event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }
        </script>
    </body>
    </html>
    